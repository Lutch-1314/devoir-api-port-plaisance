<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Gestion des r√©servations</title>
        <link rel="stylesheet" href="/stylesheets/style.css">
    </head>
    <body>
        <header>
            <h1>Gestion des r√©servations</h1>
            <nav>
                <a href="/dashboard">üíª Retour au tableau de bord</a>
            </nav>
        </header>
        <main>
            <div class="message <%= messageType || '' %> <%= message ? '' : 'hidden' %>">
                <%= message || '' %>
            </div>
            <section>
                <h2>R√©servations en cours</h2>
                <% if (!currentReservations || currentReservations.length === 0) { %>
                    <p>Aucune r√©servation en cours.</p>
                <% } else { %>
                    <table id="currentReservations" class="editable-table reservations">
                        <thead>
                            <%- include('partials/reservations/reservation-table-header') %>
                        </thead>
                        <tbody>
                            <% currentReservations.forEach(reservation => { %>
                                <%- include('partials/reservations/reservation-row', { reservation: reservation, editable: true }) %>
                            <% }); %> 
                        </tbody>
                    </table>
                <% } %>
            </section>
            <section>
                <h2>R√©servations √† venir</h2>
                <% if (futureReservations.length===0) { %>
                    <p>Aucune r√©servation √† venir.</p>
                    <% } else { %>
                        <table id="futureReservations" class="editable-table reservations">
                            <thead>
                                <%- include('partials/reservations/reservation-table-header') %>
                            </thead>
                            <tbody>
                                <% futureReservations.forEach(reservation=> { %>
                                    <%- include('partials/reservations/reservation-row', { reservation: reservation, editable: true }) %>
                                <% }); %>
                            </tbody>
                        </table>
                    <% } %>
            </section>
            <section>
                <h2>R√©servations pass√©es</h2>
                <% if (pastReservations.length === 0) { %>
                    <p>Aucune r√©servation pass√©e.</p>
                <% } else { %>
                    <table id="pastReservations" class="editable-table reservations">
                        <thead>
                            <%- include('partials/reservations/reservation-table-header') %>                      
                        </thead>
                        <tbody>
                            <% pastReservations.forEach(reservation => { %>
                                <%- include('partials/reservations/reservation-row', { reservation: reservation, editable: false }) %>
                            <% }); %>
                        </tbody>
                    </table>
                <% } %>
            </section>
            <section>
                <h2>Ajouter une nouvelle r√©servation</h2>
                <button type="button" class="show-add-form-btn">Ajouter une r√©servation</button>
                <%- include('partials/reservations/add-reservation-form') %>   
            </section>
        </main>
        <script type="module" src="/javascripts/edit-reservation.js"></script>
        <script type="module" src="/javascripts/delete-btn.js"></script>
        <script type="module" src="/javascripts/add-reservation.js"></script>
    </body>
</html>